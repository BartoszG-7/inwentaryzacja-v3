<header>
    <div class="header-flex">
        <!-- Left menu icon (mobile only, not on login) -->
        <div *ngIf="showLeftMenu && !isLoginPage" class="menu-icon left-menu" (click)="toggleLeftMenu()" [class.open]="leftMenuOpen"
            title="Open left menu">
            <i class="bi bi-list"></i>
        </div>

        <!-- KIT box (desktop only, now left side) -->
        <!-- KIT button centered in header -->
        <div class="logo-container">
            <a class="kit-box center" routerLink="/home" tabindex="0">KIT</a>
        </div>

        <!-- Logo (centered absolutely) -->
        <!-- Logo removed, KIT button now in center above -->

        <!-- Header links (desktop only, now right side) -->
        <div class="header-links">

        </div>

        <!-- Logout icon (desktop only, stays top right) -->
        <button *ngIf="!isLoginPage" class="logout-btn" (click)="loginHandler()" title="Logout" tabindex="0">
            <i class="bi bi-box-arrow-right"></i>
        </button>

        <!-- Right menu icon (mobile only, always visible on mobile) -->
        <div *ngIf="showRightMenu && !isLoginPage" class="menu-icon right-menu mobile-only" (click)="toggleRightMenu()"
            [class.open]="rightMenuOpen" title="Open right menu">
            <i class="bi bi-three-dots-vertical"></i>
        </div>
    </div>

    <!-- Left sidebar menu (slide in/out) -->
    <nav *ngIf="showLeftMenu" class="side-menu left" [class.open]="leftMenuOpen">
        <button class="close-btn" (click)="toggleLeftMenu()">&times;</button>
        <ul class="sidebar-menu-left">
            <li routerLink="/home" (click)="toggleLeftMenu()" [class.active]="isActive('/home', true)">
                Home
            </li>
            <li routerLink="/inwentaryzacja" (click)="toggleLeftMenu()" [class.active]="isActive('/inwentaryzacja')">
                Inwentaryzacja
            </li>
            <li routerLink="/magazyn" (click)="toggleLeftMenu()" [class.active]="isActive('/magazyn')">
                Magazyn
            </li>   
        </ul>
        <!-- KIT and Logout only on mobile sidebar, side by side at bottom -->
        <div *ngIf="isMobile" class="sidebar-kit-logout-row">
            <h4 class="logout-label">Log Out</h4>
            <a class="logout-btn-mobile" routerLink="/logout" (click)="loginHandler()" title="Logout" tabindex="0" [class.active]="isActive('/logout', true)">
                <i class="bi bi-box-arrow-right"></i>
            </a>
        </div>
    </nav>

    <!-- Right sidebar menu (mobile only, slide in/out) -->
    <nav *ngIf="showRightMenu" class="side-menu right sidebar-tree-flex" [class.open]="rightMenuOpen">
        <div class="sidebar-tree-header">
            <button class="close-btn" (click)="toggleRightMenu()">&times;</button>
            <ul class="sidebar-tree-list">
                <h1 class="sidebar-tree-title">Lokalizacje</h1> <!-- CSS issues -->
                <app-treebar></app-treebar>
            </ul>
        </div>
        
        <!-- No KIT/logout row here, only in left sidebar on mobile -->
    </nav>

    <!-- Overlay for side menus -->
    <div class="menu-overlay" *ngIf="leftMenuOpen || rightMenuOpen" (click)="closeMenus()"></div>
</header>